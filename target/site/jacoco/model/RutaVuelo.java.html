<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RutaVuelo.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">volandouy</a> &gt; <a href="index.source.html" class="el_package">model</a> &gt; <span class="el_source">RutaVuelo.java</span></div><h1>RutaVuelo.java</h1><pre class="source lang-java linenums">package model;

import data_types.DtRutaVuelo;
import data_types.EstadoRuta;
import java.time.LocalDate;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import jakarta.persistence.Entity;
import jakarta.persistence.Table;
import jakarta.persistence.AccessType;
import jakarta.persistence.Access;
import jakarta.persistence.Id;
import jakarta.persistence.Column;
import jakarta.persistence.OneToMany;
import jakarta.persistence.CascadeType;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.FetchType;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.MapKey;
import jakarta.persistence.Enumerated;
import jakarta.persistence.EnumType;

import static data_types.EstadoRuta.INGRESADA;


@Entity
@Table(name = &quot;RutasVuelo&quot;)
@Access(AccessType.FIELD)
public class RutaVuelo {


    @Id
    @Column(name = &quot;nombre&quot;, length = 120, nullable = false, updatable = false)
    private String nombre;


    @Column(name = &quot;descripcion&quot;, length = 500, nullable = false)
    private String descripcion;


    @Column(name = &quot;fecha_alta&quot;, nullable = false)
    private LocalDate fechaAlta;


    @Column(name = &quot;costo_base_turista&quot;, nullable = false)
    private float costoBaseTurista;


    @Column(name = &quot;costo_base_ejecutivo&quot;, nullable = false)
    private float costoBaseEjecutivo;


    @Column(name = &quot;costo_equipaje_extra&quot;, nullable = false)
    private float costoEquipajeExtra;


    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;origen_id&quot;, nullable = false)
    private Ciudad origen;


    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;destino_id&quot;, nullable = false)
    private Ciudad destino;


    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;aerolinea_nickname&quot;, referencedColumnName = &quot;nickname&quot;, nullable = false)
    private Aerolinea aerolinea;


    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;categoria_id&quot;, nullable = false)
    private Categoria categoria;


<span class="fc" id="L78">    @OneToMany(mappedBy = &quot;ruta&quot;, cascade = CascadeType.ALL, orphanRemoval = true)</span>
    @MapKey(name = &quot;nombre&quot;)
    private final Map&lt;String, Vuelo&gt; vuelos = new HashMap&lt;&gt;();

    @Column(name = &quot;imagen&quot;)
    private String urlImagen;

    @Column(name = &quot;descripcion_corta&quot;, length = 500)
    private String descripcionCorta;

<span class="fc" id="L88">    @Enumerated(EnumType.STRING)</span>
    private EstadoRuta estado= INGRESADA;

    // --- Constructores ---

    /**
     * Requerido por JPA
     */
<span class="fc" id="L96">    public RutaVuelo() {</span>
<span class="fc" id="L97">    }</span>


    public RutaVuelo(String nombre,
                     String descripcion,
                     LocalDate fechaAlta,
                     float costoBaseTurista,
                     float costoBaseEjecutivo,
                     float costoEquipajeExtra,
                     Ciudad origen,
                     Ciudad destino,
                     Aerolinea aerolinea,
                     Categoria categoria,
                     String urlImagen,
<span class="fc" id="L111">                     String descripcionCorta) {</span>
<span class="fc" id="L112">        this.nombre = nombre;</span>
<span class="fc" id="L113">        this.descripcion = descripcion;</span>
<span class="fc" id="L114">        this.costoBaseTurista = costoBaseTurista;</span>
<span class="fc" id="L115">        this.fechaAlta = fechaAlta;</span>
<span class="fc" id="L116">        this.costoBaseEjecutivo = costoBaseEjecutivo;</span>
<span class="fc" id="L117">        this.costoEquipajeExtra = costoEquipajeExtra;</span>
<span class="fc" id="L118">        this.origen = origen;</span>
<span class="fc" id="L119">        this.destino = destino;</span>
<span class="fc" id="L120">        this.aerolinea = aerolinea;</span>
<span class="fc" id="L121">        this.categoria = categoria;</span>
<span class="fc" id="L122">        this.urlImagen = urlImagen;</span>
<span class="fc" id="L123">        this.descripcionCorta = descripcionCorta;</span>
<span class="fc" id="L124">    }</span>


    // --- Getters / Setters de atributos simples ---
    public String getNombre() {
<span class="fc" id="L129">        return nombre;</span>
    }

    public void setNombre(String nombre) {
<span class="fc" id="L133">        this.nombre = nombre;</span>
<span class="fc" id="L134">    }</span>


    public String getDescripcion() {
<span class="fc" id="L138">        return descripcion;</span>
    }

    public void setDescripcion(String descripcion) {
<span class="fc" id="L142">        this.descripcion = descripcion;</span>
<span class="fc" id="L143">    }</span>


    public LocalDate getFechaAlta() {
<span class="fc" id="L147">        return fechaAlta;</span>
    }      // &lt;-- LocalDate

    public void setFechaAlta(LocalDate fechaAlta) {
<span class="fc" id="L151">        this.fechaAlta = fechaAlta;</span>
<span class="fc" id="L152">    }</span>


    public float getCostoBaseTurista() {
<span class="fc" id="L156">        return costoBaseTurista;</span>
    }

    public void setCostoBaseTurista(float costoBaseTurista) {
<span class="fc" id="L160">        this.costoBaseTurista = costoBaseTurista;</span>
<span class="fc" id="L161">    }</span>


    public float getCostoBaseEjecutivo() {
<span class="fc" id="L165">        return costoBaseEjecutivo;</span>
    }

    public void setCostoBaseEjecutivo(float costoBaseEjecutivo) {
<span class="fc" id="L169">        this.costoBaseEjecutivo = costoBaseEjecutivo;</span>
<span class="fc" id="L170">    }</span>


    public float getCostoEquipajeExtra() {
<span class="fc" id="L174">        return costoEquipajeExtra;</span>
    }

  /*  public void setCostoEquipajeExtra(float costoEquipajeExtra) {
        this.costoEquipajeExtra = costoEquipajeExtra;
    }*/
    public Map&lt;String, Vuelo&gt; getVuelos() {
<span class="fc" id="L181">        return vuelos;</span>
    }

    public Ciudad getOrigen() {
<span class="fc" id="L185">        return origen;</span>
    }

    public void setOrigen(Ciudad origen) {
<span class="fc" id="L189">        this.origen = origen;</span>
<span class="fc" id="L190">    }</span>


    public Ciudad getDestino() {
<span class="fc" id="L194">        return destino;</span>
    }

    public void setDestino(Ciudad destino) {
<span class="fc" id="L198">        this.destino = destino;</span>
<span class="fc" id="L199">    }</span>


    public Aerolinea getAerolinea() {
<span class="fc" id="L203">        return aerolinea;</span>
    }

    public void setAerolinea(Aerolinea aerolinea) {
<span class="fc" id="L207">        this.aerolinea = aerolinea;</span>
<span class="fc" id="L208">    }</span>


    public Categoria getCategoria() {
<span class="fc" id="L212">        return categoria;</span>
    }

    public void setCategoria(Categoria categoria) {
<span class="fc" id="L216">        this.categoria = categoria;</span>
<span class="fc" id="L217">    }</span>

<span class="fc" id="L219">    public String getUrlImagen() {return urlImagen; }</span>

<span class="fc" id="L221">    public void setUrlImagen(String urlImagen) {this.urlImagen = urlImagen; }</span>

<span class="fc" id="L223">    public String getDescripcionCorta() {return descripcionCorta; }</span>

   // public void setDescripcionCorta(String descripcionCorta) {this.descripcionCorta = descripcionCorta; }

<span class="fc" id="L227">    public EstadoRuta getEstado() {return estado; }</span>

 //   public void setEstado(EstadoRuta estado) {this.estado = estado; }

    public DtRutaVuelo toDto() {
        // Obtenemos solo los nombres de los vuelos
<span class="fc" id="L233">        List&lt;String&gt; nombresVuelos = this.vuelos.keySet().stream()</span>
<span class="fc" id="L234">                .toList();</span>

<span class="fc" id="L236">        return new DtRutaVuelo(</span>
                this.nombre,
                this.descripcion,
                this.fechaAlta,
                this.costoBaseTurista,
                this.costoBaseEjecutivo,
                this.costoEquipajeExtra,
<span class="fc bfc" id="L243" title="All 2 branches covered.">                this.origen != null ? this.origen.getNombre() : null,</span>
<span class="fc bfc" id="L244" title="All 2 branches covered.">                this.destino != null ? this.destino.getNombre() : null,</span>
<span class="fc bfc" id="L245" title="All 2 branches covered.">                this.aerolinea != null ? this.aerolinea.getNombre() : null,</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">                this.categoria != null ? this.categoria.getNombre() : null,</span>
                nombresVuelos,
                this.urlImagen,
                this.descripcionCorta,
                this.estado

        );
    }

}


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>